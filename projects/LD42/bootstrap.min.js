/*
 * Base.js by aucguy. Under MIT License.
 * built on  2018-08-11
 */

var base=function(r){r.base=r.base||{},errorCallbacks=[];var a=[],o=[],i=[],s=[],l=null;function u(e){Q(errorCallbacks,l=e),console.error(e.stack);var n=document.getElementById("error div"),t=document.getElementById("error text"),a=document.getElementById(r.base.displayId||"display");t&&(t.innerHTML=e.stack),n&&(n.style.display="block"),a&&(a.style.display="none")}function n(e,n,t){if(!l)try{e.apply(n,t)}catch(e){u(e)}}function c(e){return function(){n(e,this,arguments)}}function e(t,a){return function(){var e=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);e[0]=base.external(e[0]);var n=t.apply(null,e);return a.push(n),n}}function t(n,t){return function(e){n(e),t.splice(t.indexOf(e),1)}}r.base.displayId=r.base.displayId||null,window.addEventListener("error",function(e){u(e.error)});var d=e(setInterval,a),f=t(clearInterval,a);function m(e,n,t,a){var r=c(t);e.addEventListener(n,r,a),o.push({element:e,event:n,ext:r,callback:t,capture:a})}function g(e,n,t){for(var a=0;a<o.length;a++){var r=o[a];if(r.element==e&&r.event==n&&r.callback==t){r.element.removeEventListener(n,r.ext),o.splice(a,1);break}}}for(var v=["ms","moz","webkit","o"],h=r.requestAnimationFrame,p=r.cancelAnimationFrame,b=0;b<v.length&&!h;b++)h=r[v[b]+"RequestAnimationFrame"],p=r[v[b]+"CancelAnimationFrame"];var A=e(h,i),I=t(p,i),y=e(setTimeout,s),x=t(clearTimeout,s),E="webkit";errorCallbacks.push(function(e){var n;for(n=0;n<a.length;n++)f(a[n]);for(n=0;n<o.length;n++){var t=o[n];g(t.element,t.event,t.callback)}for(n=0;n<i.length;n++)I(i[n]);for(n=0;n<s.lenght;n++)clearTimeout(s[n])});var L={},T=[];function N(e){var n=L[e];if(!n)throw new Error("module '"+e+"' is not defined");return n.scope||(n.scope=n.initFunc()),n.scope}var C={},k="",w=-1,S=0,O={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},_=!(!r.AudioContext&&!r.webkitAudioContext);function F(e,n,t,a,r,o){return{type:t,id:e,url:n,data:a,extra:r||{},xhr:o||null}}function P(t,a,r,o){t in C||(j(),B(R(k,a),"audio"==r,function(e){try{var n=-1!=["json","tilemap"].indexOf(r)?JSON.parse(e.response):e.response;C[t]=F(t,a,r,n,o,e),G()}catch(e){throw G(),e}},function(e){throw G(),new Error("failed to retrieve asset "+t)}))}function D(e,n,t,a){if(!(e in C)){j();var r=document.createElement(O[t]||t);"script"==t?(document.head.appendChild(r),r.onload=G):r.onload=base.external(function(){C[e]=F(e,n,t,r,a),G()}),r.onerror=base.external(function(){throw new Error("failed to load asset '"+e+"' at '"+n+"'")}),r.src=R(k,n)}}function M(e,n,t,a){"text"==O[t]||"audio"==t&&_?P(e,n,t,a):D(e,n,t,a)}function j(){w=w<0?1:w+1}function G(){w--,S++}function B(n,e,t,a){void 0===a&&(a=function(e){console.warn("asset '"+n+"' failed to load with a status of "+e.status)});var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.responseType=e?"arraybuffer":"text",r.onreadystatechange=c(function(){4==r.readyState&&(200==r.status||0===r.status?t(r):a(r))}),r.open("GET",n,!0),r.send()}function R(){for(var e=[],n=0,t=arguments.length;n<t;n++)e=e.concat(arguments[n].split("/"));var a=[];for(n=0,t=e.length;n<t;n++){var r=e[n];r&&"."!==r&&(".."===r?0===a.length||".."==a[a.length-1]?a.push(r):a.pop():a.push(r))}for(n=0;n<arguments.length;n++)if(arguments[n]){(arguments[n].startsWith("/")||arguments[n].startsWith("\\"))&&a.unshift("");break}return a.join("/")||(a.length?"/":".")}r.base.indexFunc=r.base.indexFunc||null;var X={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},q="display",W=null,H=X.BASE_NOT_RUN;function U(e,n,t){null!==r.base.renderLoadingScreen&&r.base.renderLoadingScreen(e,n,t)}function z(){J(),U(q,w,S),0===w&&(K(X.APP_INITING),mainModule=N("main"),mainModule.init(),K(X.APP_RUNNING))}function J(){H==X.INDEX_NOT_LOADED&&null!==r.base.indexFunc&&(r.base.indexFunc(),K(X.ASSETS_LOADING))}function K(e){e!=H&&(H=e,Q(stateChangeCallbacks,e))}function Q(e,n){for(var t=0;t<e.length;t++)e[t](n)}return stateChangeCallbacks=[],r.base.renderLoadingScreen=r.base.renderLoadingScreen||null,stateChangeCallbacks.push(function(e){e==X.APP_INITING&&(f(W),U())}),stateChangeCallbacks.push(J),m(document,"DOMContentLoaded",function(){U(q,w,S),W=d(z,100),K(X.INDEX_NOT_LOADED)},!1),{displayId:r.base.displayId,onError:u,runSafely:n,external:c,setInterval:d,clearInterval:f,addEventListener:m,removeEventListener:g,requestAnimationFrame:h,cancelAnimationFrame:I,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:function(){var e=function(e){for(var n=e,t={};e;){for(var a=Object.getOwnPropertyNames(e),r=0;r<a.length;r++){var o,i=a[r];if(i.startsWith(E)){var s=i.slice(E.length);(o=e[s])||(o=e[s=s[0].toLowerCase()+s.slice(1)])||(o=e[i])}else o=e[i];t[i]="function"==typeof o?o.bind(n):o}e=Object.getPrototypeOf(e)}return t}(r);return e.setInterval=d,e.clearInterval=f,e.requestAnimationFrame=A,e.cancelAnimationFrame=I,e.setTimeout=y,e.clearTimeout=x,e},getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return T},registerModule:function(e,n){var t={name:e,scope:null,initFunc:n};L[e]=t,Q(T,t)},importModule:N,getBasePath:function(){return k},setBasePath:function(e){k=e},hasWebAudio:function(){return _},indexFunc:r.base.indexFunc,getAsset:function(e){return C[e].data},getAssets:function(){return C},loadText:P,loadTag:D,loadAsset:M,loadAssets:function(e,n){n=n||"";for(var t=0;t<e.length;t++){var a=e[t];M(a[0],R(n,a[1]),a[2],a[3])}},decrLoading:G,ajax:B,join:R,renderLoadingScreen:r.base.renderLoadingScreen,getStates:function(){return X},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return H},setLoadingState:function(e){K(e)}}}(this);
//# sourceMappingURL=base.min.js.map
var base=base||{},indexlib=indexlib||{};!function(){var d;indexlib.basePath=indexlib.basePath||"",indexlib.loadManifests=indexlib.loadManifests||function(){};var b=!1;indexlib.loadManifest=function(e,n){base.ajax(e,!1,function(e){base.loadAssets(JSON.parse(e.response).items,n)})},base.indexFunc=function(e){indexlib.loadManifests(),(d=new Image).onload=base.external(function(){b=!0}),d.src=base.join(indexlib.basePath,"assets/image/logo.png")},base.renderLoadingScreen=function(e,n,a){var i=document.getElementById(e);if(null!==i){var t=i.getContext("2d");if(null!==t){var l=t.canvas.width,s=t.canvas.height;t.fillStyle="#FFFFFF",t.fillRect(0,0,l,s),b&&t.drawImage(d,(l-d.width)/2,(s-d.height)/2),t.fillStyle="#000000",t.beginPath(),t.rect(20,s-40,l-40,20),t.stroke(),t.beginPath(),t.rect(20,s-40,a/(a+n)*(l-40),20),t.fill()}}}}();
var indexlib=indexlib||{};indexlib.basePath="",indexlib.loadManifests=function(){base.loadAssets([["scripts/app","app.min.js","script"],["image/background","assets/background.svg","image"],["image/cheese","assets/cheese.svg","image"],["image/flour","assets/flour.svg","image"],["image/oil","assets/oil.svg","image"],["image/pepper","assets/pepper.svg","image"],["image/salt","assets/salt.svg","image"],["image/tomato","assets/tomato.svg","image"],["image/water","assets/water.svg","image"],["image/yeast","assets/yeast.svg","image"],["image/bowl","assets/bowl.svg","image"],["image/pot","assets/pot.svg","image"],["image/strainer","assets/strainer.svg","image"],["image/cookBar","assets/cookBar.svg","image"],["image/cookArrow","assets/cookArrow.svg","image"],["config/zones","assets/zones.json","json"]])};