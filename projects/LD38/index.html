<!doctype html> <html> <head> <meta charset="UTF-8"> <title>Planet Carbalsnahps 2</title> <script>var base=(base=function(r){function a(e){I(errorCallbacks,T=e),console.error(e.stack);var t=document.getElementById("error div"),n=document.getElementById("error text"),a=document.getElementById(r.base.displayId||"display");n&&(n.innerHTML=e.stack),t&&(t.style.display="block"),a&&(a.style.display="none")}function t(e,t,n){if(!T)try{e.apply(t,n)}catch(e){a(e)}}function o(e){return function(){t(e,this,arguments)}}function e(n,a){return function(){var e=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);e[0]=base.external(e[0]);var t=n.apply(null,e);return a.push(t),t}}function n(t,n){return function(e){t(e),n.splice(n.indexOf(e),1)}}function i(e,t,n,a){var r=o(n);e.addEventListener(t,r,a),x.push({element:e,event:t,ext:r,callback:n,capture:a})}function s(e,t,n){for(var a=0;a<x.length;a++){var r=x[a];if(r.element==e&&r.event==t&&r.callback==n){r.element.removeEventListener(t,r.ext),x.splice(a,1);break}}}function l(e){var t=j[e];if(!t)throw new Error("module '"+e+"' is not defined");return t.scope||(t.scope=t.initFunc()),t.scope}function c(e,t,n,a,r,i){return{type:n,id:e,url:t,data:a,extra:r||{},xhr:i||null}}function u(n,a,r,i){n in G||(g(),function(t,e,n,a){void 0===a&&(a=function(e){console.warn("asset '"+t+"' failed to load with a status of "+e.status)});var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.responseType=e?"arraybuffer":"text",r.onreadystatechange=o(function(){4==r.readyState&&(200==r.status||0===r.status?n(r):a(r))}),r.open("GET",t,!0),r.send()}(h(R,a),"audio"==r,function(e){try{var t=-1!=["json","tilemap"].indexOf(r)?JSON.parse(e.response):e.response;G[n]=c(n,a,r,t,i,e),m()}catch(e){throw m(),e}},function(e){throw m(),new Error("failed to retrieve asset "+n)}))}function d(e,t,n,a){if(!(e in G)){g();var r=document.createElement(W[n]||n);"script"==n?(document.head.appendChild(r),r.onload=m):r.onload=base.external(function(){G[e]=c(e,t,n,r,a),m()}),r.onerror=base.external(function(){throw new Error("failed to load asset '"+e+"' at '"+t+"'")}),r.src=h(R,t)}}function f(e,t,n,a){"text"==W[n]||"audio"==n&&H?u(e,t,n,a):d(e,t,n,a)}function g(){X=X<0?1:X+1}function m(){X--,q++}function h(){for(var e=[],t=0,n=arguments.length;t<n;t++)e=e.concat(arguments[t].split("/"));var a=[];for(t=0,n=e.length;t<n;t++){var r=e[t];r&&"."!==r&&(".."===r?0===a.length||".."==a[a.length-1]?a.push(r):a.pop():a.push(r))}return(e[0].startsWith("/")||e[0].startsWith("\\"))&&a.unshift(""),a.join("/")||(a.length?"/":".")}function p(e,t,n){null!==r.base.renderLoadingScreen&&r.base.renderLoadingScreen(e,t,n)}function v(){b(),p(z,X,q),0===X&&(A(U.APP_INITING),mainModule=l("main"),mainModule.init(),A(U.APP_RUNNING))}function b(){K==U.INDEX_NOT_LOADED&&null!==r.base.indexFunc&&(r.base.indexFunc(),A(U.ASSETS_LOADING))}function A(e){e!=K&&(K=e,I(stateChangeCallbacks,e))}function I(e,t){for(var n=0;n<e.length;n++)e[n](t)}r.base=r.base||{},errorCallbacks=[];var y=[],x=[],E=[],L=[],T=null;r.base.displayId=r.base.displayId||null;for(var k=e(setInterval,y),C=n(clearInterval,y),N=["ms","moz","webkit","o"],S=r.requestAnimationFrame,w=r.cancelAnimationFrame,F=0;F<N.length&&!S;F++)S=r[N[F]+"RequestAnimationFrame"],w=r[N[F]+"CancelAnimationFrame"];var O=e(S,E),P=n(w,E),_=e(setTimeout,L),D=n(clearTimeout,L),M="webkit";errorCallbacks.push(function(e){var t;for(t=0;t<y.length;t++)C(y[t]);for(t=0;t<x.length;t++){var n=x[t];s(n.element,n.event,n.callback)}for(t=0;t<E.length;t++)P(E[t]);for(t=0;t<L.lenght;t++)clearTimeout(L[t])});var j={},B=[],G={},R="",X=-1,q=0,W={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},H=!(!r.AudioContext&&!r.webkitAudioContext);r.base.indexFunc=r.base.indexFunc||null;var U={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},z="display",J=null,K=U.BASE_NOT_RUN;return stateChangeCallbacks=[],r.base.renderLoadingScreen=r.base.renderLoadingScreen||null,stateChangeCallbacks.push(function(e){e==U.APP_INITING&&(C(J),p())}),stateChangeCallbacks.push(b),i(document,"DOMContentLoaded",function(){p(z,X,q),J=k(v,100),A(U.INDEX_NOT_LOADED)},!1),{displayId:r.base.displayId,onError:a,runSafely:t,external:o,setInterval:k,clearInterval:C,addEventListener:i,removeEventListener:s,requestAnimationFrame:S,cancelAnimationFrame:P,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:function(){var e=function(e){for(var t=e,n={};e;){for(var a=Object.getOwnPropertyNames(e),r=0;r<a.length;r++){var i,o=a[r];if(o.startsWith(M)){var s=o.slice(M.length);(i=e[s])||(i=e[s=s[0].toLowerCase()+s.slice(1)])||(i=e[o])}else i=e[o];n[o]="function"==typeof i?i.bind(t):i}e=Object.getPrototypeOf(e)}return n}(r);return e.setInterval=k,e.clearInterval=C,e.requestAnimationFrame=O,e.cancelAnimationFrame=P,e.setTimeout=_,e.clearTimeout=D,e},getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return B},registerModule:function(e,t){var n={name:e,scope:null,initFunc:t};j[e]=n,I(B,n)},importModule:l,getBasePath:function(){return R},setBasePath:function(e){R=e},hasWebAudio:function(){return H},indexFunc:r.base.indexFunc,getAsset:function(e){return G[e].data},getAssets:function(){return G},loadText:u,loadTag:d,loadAsset:f,loadAssets:function(e,t){t=t||"";for(var n=0;n<e.length;n++){var a=e[n];f(a[0],h(t,a[1]),a[2],a[3])}},decrLoading:m,renderLoadingScreen:r.base.renderLoadingScreen,getStates:function(){return U},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return K},setLoadingState:function(e){A(e)}}}(this))||{};!function(){var s,l=!1;base.indexFunc=function(){base.loadAssets([["image/background","assets/image/background.svg","text"],["image/joint","assets/image/joint.svg","image"]].concat([["scripts/app","app.min.js","script"]])),(s=new Image).onload=base.external(function(){l=!0}),s.src="assets/image/logo.png"},base.renderLoadingScreen=function(e,t,n){var a=document.getElementById(e);if(null!==a){var r=a.getContext("2d");if(null!==r){var i=r.canvas.width,o=r.canvas.height;r.fillStyle="#FFFFFF",r.fillRect(0,0,i,o),l&&r.drawImage(s,(i-s.width)/2,(o-s.height)/2),r.fillStyle="#000000",r.beginPath(),r.rect(20,o-40,i-40,20),r.stroke(),r.beginPath(),r.rect(20,o-40,n/(n+t)*(i-40),20),r.fill()}}}}()</script> </head> <body> <span id="gameContainer"> <canvas id="display" width="600" , height="400"></canvas> <div id="error div" style="display:none"> Oh, no! an error has occurred. <p> <textarea readonly id="error text" rows="25" cols="100">error text</textarea> </p> </div> </span> </body> </html> 