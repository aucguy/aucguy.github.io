<!doctype html> <html> <head> <meta charset="UTF-8"/> <title>Planet Carbalsnahps 2</title> <script>var base=function(e){function t(t){O=t,C(errorCallbacks,t),console.error(t.stack);var n=document.getElementById("error div"),a=document.getElementById("error text"),r=document.getElementById(e.base.displayId||"display");a&&(a.innerHTML=t.stack),n&&(n.style.display="block"),r&&(r.style.display="none")}function n(e,n,a){if(!O)try{e.apply(n,a)}catch(r){t(r)}}function a(e){return function(){n(e,this,arguments)}}function r(e,t){return function(){var n=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);n[0]=base.external(n[0]);var a=e.apply(null,n);return t.push(a),a}}function i(e,t){return function(n){e(n),t.splice(t.indexOf(n),1)}}function o(e,t,n,r){var i=a(n);e.addEventListener(t,i,r),S.push({element:e,event:t,ext:i,callback:n,capture:r})}function s(e,t,n){for(var a=0;a<S.length;a++){var r=S[a];if(r.element==e&&r.event==t&&r.callback==n){r.element.removeEventListener(t,r.ext),S.splice(a,1);break}}}function l(e){for(var t=e,n={};e;){for(var a=Object.getOwnPropertyNames(e),r=0;r<a.length;r++){var i,o=a[r];if(o.startsWith(W)){var s=o.slice(W.length);i=e[s],i||(s=s[0].toLowerCase()+s.slice(1),i=e[s],i||(i=e[o]))}else i=e[o];"function"==typeof i?n[o]=i.bind(t):n[o]=i}e=Object.getPrototypeOf(e)}return n}function c(){var t=l(e);return t.setInterval=P,t.clearInterval=_,t.requestAnimationFrame=G,t.cancelAnimationFrame=R,t.setTimeout=X,t.clearTimeout=q,t}function u(e,t){var n={name:e,scope:null,initFunc:t};H[e]=n,C(U,n)}function d(e){var t=H[e];if(!t)throw new Error("module '"+e+"' is not defined");return t.scope||(t.scope=t.initFunc()),t.scope}function f(e){return z[e].data}function g(e,t,n,a,r,i){return{type:n,id:e,url:t,data:a,extra:r?r:{},xhr:i?i:null}}function m(e,t,n,a){e in z||(b(),A(I(J,t),"audio"==n,function(r){try{var i=-1!=["json","tilemap"].indexOf(n)?JSON.parse(r.response):r.response;z[e]=g(e,t,n,i,a,r),y()}catch(o){throw y(),o}},function(t){throw y(),new Error("failed to retrieve asset "+e)}))}function p(e,t,n,a){if(!(e in z)){b();var r=document.createElement(V[n]||n);"script"==n?(document.head.appendChild(r),r.onload=y):r.onload=base.external(function(){z[e]=g(e,t,n,r,a),y()}),r.onerror=base.external(function(){throw new Error("failed to load asset '"+e+"' at '"+t+"'")}),r.src=I(J,t)}}function h(e,t,n,a){"text"==V[n]||"audio"==n&&Y?m(e,t,n,a):p(e,t,n,a)}function v(e,t){t=t||"";for(var n=0;n<e.length;n++){var a=e[n];h(a[0],I(t,a[1]),a[2],a[3])}}function b(){K=0>K?1:K+1}function y(){K--,Q++}function A(e,t,n,r){"undefined"==typeof r&&(r=function(t){console.warn("asset '"+e+"' failed to load with a status of "+t.status)});var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.responseType=t?"arraybuffer":"text",i.onreadystatechange=a(function(){4==i.readyState&&(200==i.status||0===i.status?n(i):r(i))}),i.open("GET",e,!0),i.send()}function I(){for(var e=[],t=0,n=arguments.length;n>t;t++)e=e.concat(arguments[t].split("/"));var a=[];for(t=0,n=e.length;n>t;t++){var r=e[t];r&&"."!==r&&(".."===r?0===a.length||".."==a[a.length-1]?a.push(r):a.pop():a.push(r))}return(e[0].startsWith("/")||e[0].startsWith("\\"))&&a.unshift(""),a.join("/")||(a.length?"/":".")}function x(t,n,a){null!==e.base.renderLoadingScreen&&e.base.renderLoadingScreen(t,n,a)}function E(){x($,K,Q),ee=P(L,100),k(Z.INDEX_NOT_LOADED)}function L(){T(),x($,K,Q),0===K&&(k(Z.APP_INITING),mainModule=d("main"),mainModule.init(),k(Z.APP_RUNNING))}function T(){te==Z.INDEX_NOT_LOADED&&null!==e.base.indexFunc&&(e.base.indexFunc(),k(Z.ASSETS_LOADING))}function k(e){e!=te&&(te=e,C(stateChangeCallbacks,e))}function C(e,t){for(var n=0;n<e.length;n++)e[n](t)}e.base=e.base||{},errorCallbacks=[];var N=[],S=[],w=[],F=[],O=null;e.base.displayId=e.base.displayId||null;for(var P=r(setInterval,N),_=i(clearInterval,N),D=["ms","moz","webkit","o"],M=e.requestAnimationFrame,j=e.cancelAnimationFrame,B=0;B<D.length&&!M;B++)M=e[D[B]+"RequestAnimationFrame"],j=e[D[B]+"CancelAnimationFrame"];var G=r(M,w),R=i(j,w),X=r(setTimeout,F),q=i(clearTimeout,F),W="webkit";errorCallbacks.push(function(e){var t;for(t=0;t<N.length;t++)_(N[t]);for(t=0;t<S.length;t++){var n=S[t];s(n.element,n.event,n.callback)}for(t=0;t<w.length;t++)R(w[t]);for(t=0;t<F.lenght;t++)clearTimeout(F[t])});var H={},U=[],z={},J="",K=-1,Q=0,V={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},Y=!(!e.AudioContext&&!e.webkitAudioContext);e.base.indexFunc=e.base.indexFunc||null;var Z={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},$="display",ee=null,te=Z.BASE_NOT_RUN;return stateChangeCallbacks=[],e.base.renderLoadingScreen=e.base.renderLoadingScreen||null,stateChangeCallbacks.push(function(e){e==Z.APP_INITING&&(_(ee),x())}),stateChangeCallbacks.push(T),o(document,"DOMContentLoaded",E,!1),{displayId:e.base.displayId,onError:t,runSafely:n,external:a,setInterval:P,clearInterval:_,addEventListener:o,removeEventListener:s,requestAnimationFrame:M,cancelAnimationFrame:R,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:c,getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return U},registerModule:u,importModule:d,getBasePath:function(){return J},setBasePath:function(e){J=e},hasWebAudio:function(){return Y},indexFunc:e.base.indexFunc,getAsset:f,getAssets:function(){return z},loadText:m,loadTag:p,loadAsset:h,loadAssets:v,decrLoading:y,renderLoadingScreen:e.base.renderLoadingScreen,getStates:function(){return Z},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return te},setLoadingState:function(e){k(e)}}}(this),base=base||{};!function(){var e,t=!1;base.indexFunc=function(n){var a=[["image/background","assets/image/background.svg","text"],["image/joint","assets/image/joint.svg","image"]];base.loadAssets(a.concat([["scripts/app","app.min.js","script"]])),e=new Image,e.onload=base.external(function(){t=!0}),e.src="assets/image/logo.png"},base.renderLoadingScreen=function(n,a,r){var i=document.getElementById(n);if(null!==i){var o=i.getContext("2d");if(null!==o){var s=o.canvas.width,l=o.canvas.height;o.fillStyle="#FFFFFF",o.fillRect(0,0,s,l),t&&o.drawImage(e,(s-e.width)/2,(l-e.height)/2),o.fillStyle="#000000",o.beginPath(),o.rect(20,l-40,s-40,20),o.stroke(),o.beginPath(),o.rect(20,l-40,r/(r+a)*(s-40),20),o.fill()}}}}();</script> </head> <body> <span id="gameContainer"> <canvas id="display" width="600", height="400"></canvas> <div id="error div" style="display:none"> Oh, no! an error has occurred. <p> <textarea readonly id="error text" rows="25" cols="100">error text</textarea> </p> </div> </span> </body> </html>