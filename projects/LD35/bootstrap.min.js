(base=base||{}).indexFunc=function(e){base.loadAssets([["gui/mainMenu","assets/gui/mainMenu.svg","text"],["gui/loseMenu","assets/gui/loseMenu.svg","text"],["images/triangle","assets/images/triangle.svg","text"],["images/square","assets/images/square.svg","text"],["images/circle","assets/images/circle.svg","text"],["images/pentagon","assets/images/pentagon.svg","text"],["images/direction","assets/images/direction-up.svg","image"],["sounds/fail","assets/sounds/fail.wav","audio"],["sounds/success","assets/sounds/success.wav","audio"],["sounds/lose","assets/sounds/lose.wav","audio"]].concat([["scripts/app","app.min.js","script"]]))};var base=function(t){function a(e){x(errorCallbacks,N=e),console.error(e.stack);var t=document.getElementById("error div"),n=document.getElementById("error text"),a=document.getElementById("display");n&&(n.innerHTML=e.stack),t&&(t.style.display="block"),a&&(a.style.display="none")}function n(e,t,n){if(!N)try{e.apply(t,n)}catch(e){a(e)}}function r(e){return function(){n(e,this,arguments)}}function e(n,a){return function(){var e=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);e[0]=base.external(e[0]);var t=n.apply(null,e);return a.push(t),t}}function s(t,e){return function(e){t(e),I.splice(I.indexOf(e),1)}}function i(e,t,n,a){var s=r(n);e.addEventListener(t,s,a),T.push({element:e,event:t,ext:s,callback:n,capture:a})}function o(e,t,n){for(var a=0;a<T.length;a++){var s=T[a];if(s.element==e&&s.event==t&&s.callback==n){s.element.removeEventListener(t,s.ext),T.splice(a,1);break}}}function l(e){var t=B[e];if(!t)throw new Error("module '"+e+"' is not defined");return t.scope||(t.scope=t.initFunc()),t.scope}function u(e,t,n,a,s,r){return{type:n,id:e,url:t,data:a,extra:s||null,xhr:r||null}}function c(t,n,a,s){t in q||(g(),function(t,e,n,a){void 0===a&&(a=function(e){console.warn("asset '"+t+"' failed to load with a status of "+e.status)});var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.responseType=e?"arraybuffer":"text",s.onreadystatechange=r(function(){4==s.readyState&&(200==s.status||0===s.status?n(s):a(s))}),s.open("GET",t,!0),s.send()}(v(R,n),"audio"==a,function(e){try{q[t]=u(t,n,a,e.response,s,e),m()}catch(e){throw m(),e}},function(e){throw m(),new Error("failed to retrieve asset "+t)}))}function f(e,t,n,a){if(!(e in q)){g();var s=document.createElement(H[n]||n);"script"==n?(document.head.appendChild(s),s.onload=m):s.onload=base.external(function(){q[e]=u(e,t,n,s,a),m()}),s.onerror=base.external(function(){throw new Error("failed to load asset '"+e+"' at '"+t+"'")}),s.src=v(R,t)}}function d(e,t,n,a){"text"==H[n]||"audio"==n&&W?c(e,t,n,a):f(e,t,n,a)}function g(){X=X<0?1:X+1}function m(){X--,j++}function v(){for(var e=[],t=0,n=arguments.length;t<n;t++)e=e.concat(arguments[t].split("/"));var a=[];for(t=0,n=e.length;t<n;t++){var s=e[t];s&&"."!==s&&(".."===s?a.pop():a.push(s))}return(e[0].startsWith("/")||e[0].startsWith("\\"))&&a.unshift(""),a.join("/")||(a.length?"/":".")}function h(){A(),p(),0===X&&(b(z.APP_INITING),mainModule=l("main"),mainModule.init(),b(z.APP_RUNNING))}function p(){var e,t,n=document.getElementById(J),a=n.getContext("2d");if(a.fillStyle="#000000",a.fillRect(0,0,n.width,n.height),a.textBaseline="top",a.font="72px Arial",a.strokeStyle="#FFFFFF",Q==z.ASSETS_LOADING){var s=X+j;t="Loading: "+s+"/"+s,e="Loading: "+j+"/"+s}else t=e=Q==z.APP_INITING?"Initializing":"Bad State";var r=a.measureText(t);a.strokeText(e,n.width/2-r.width/2,n.height/2-36)}function A(){Q==z.INDEX_NOT_LOADED&&null!==U&&(U(),b(z.ASSETS_LOADING))}function b(e){e!=Q&&(Q=e,x(stateChangeCallbacks,e))}function x(e,t){for(var n=0;n<e.length;n++)e[n](t)}errorCallbacks=[];for(var I=[],T=[],y=[],E=[],N=null,w=e(setInterval,I),C=s(clearInterval),k=["ms","moz","webkit","o"],L=t.requestAnimationFrame,S=t.cancelAnimationFrame,O=0;O<k.length&&!L;O++)L=t[k[O]+"RequestAnimationFrame"],S=t[k[O]+"CancelAnimationFrame"];var _=e(L,y),F=s(S),P=e(setTimeout,E),D=s(clearTimeout),M="webkit";errorCallbacks.push(function(e){var t;for(t=0;t<I.length;t++)C(I[t]);for(t=0;t<T.length;t++){var n=T[t];o(n.element,n.event,n.callback)}for(t=0;t<y.length;t++)F(y[t]);for(t=0;t<E.lenght;t++)clearTimeout(E[t])});var B={},G=[],q={},R="",X=-1,j=0,H={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},W=!(!t.AudioContext&&!t.webkitAudioContext),U=(t.base?t.base.indexFunc:null)||[],z={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},J="display",K=null,Q=z.BASE_NOT_RUN;return stateChangeCallbacks=[],stateChangeCallbacks.push(function(e){e==z.APP_INITING&&(C(K),p())}),stateChangeCallbacks.push(A),i(document,"DOMContentLoaded",function(){p(),K=w(h,100),b(z.INDEX_NOT_LOADED)},!1),{onError:a,runSafely:n,external:r,setInterval:w,clearInterval:C,addEventListener:i,removeEventListener:o,requestAnimationFrame:L,cancelAnimationFrame:F,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:function(){var e=function(e){for(var t=e,n={};e;){for(var a=Object.getOwnPropertyNames(e),s=0;s<a.length;s++){var r,i=a[s];if(i.startsWith(M)){var o=i.slice(M.length);(r=e[o])||(r=e[o=o[0].toLowerCase()+o.slice(1)])||(r=e[i])}else r=e[i];n[i]="function"==typeof r?r.bind(t):r}e=Object.getPrototypeOf(e)}return n}(t);return e.setInterval=w,e.clearInterval=C,e.requestAnimationFrame=_,e.cancelAnimationFrame=F,e.setTimeout=P,e.clearTimeout=D,e},getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return G},registerModule:function(e,t){var n={name:e,scope:null,initFunc:t};B[e]=n,x(G,n)},importModule:l,getBasePath:function(){return R},setBasePath:function(e){R=e},getAsset:function(e){return q[e].data},getAssets:function(){return q},loadText:c,loadTag:f,loadAsset:d,loadAssets:function(e){for(var t=0;t<e.length;t++){var n=e[t];d(n[0],n[1],n[2],n[3])}},decrLoading:m,getStates:function(){return z},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return Q},setLoadingState:function(e){b(e)}}}(this);