base.registerModule("run",function(e){function t(){i(),a=base.setInterval(o,1)}function n(){var t=base.importModule("engine");e.SCREEN_WIDTH=document.getElementById(l).width,e.SCREEN_HEIGHT=document.getElementById(l).height,t.DISPLAY_ID=l,t.init(),t.World.prototype.handleError=function(e,t){console.error("error occured when handling event "+t),base.onError(e)},e.onInit()}function o(){if(i(),e.initDone&&0===r.getLoading()){n(),base.clearInterval(a);var t=base.importModule("engine");base.setInterval(t.tick,1/30)}}function i(){var e=document.getElementById(l),t=e.getContext("2d");t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height),t.textBaseline="top",t.font="72px Arial",t.strokeStyle="#FFFFFF";var n,o=t.measureText("loading..."),i=Math.floor((new Date).getTime()%3e3/1e3);n=0===i?"loading.":1==i?"loading..":"loading...",t.strokeText(n,e.width/2-o.width/2,e.height/2-36)}var r=base.importModule("resource");base.importModule("main");const l="display";e.SCREEN_WIDTH=null,e.SCREEN_HEIGHT=null;var a=null;e.onInit||(e.onInit=function(){}),e.initDone||(e.initDone=!1),t()});