base.registerModule("visual",function(e){function t(e,t,a,n,i){var o=r.makeCanvas(n,i);return o.getContext("2d").drawImage(e,-t,-a),o}var a=base.importModule("util"),r=base.importModule("engine"),n={constructor:base.abstractMethod,textures:base.abstractField};e.graphicsProvider=n,e.setGraphicsProvider=function(t){n=t,e.graphicsProvider=t},e.clipCanvas=t,e.blitCenter=function(e,t,a,r){e.getContext("2d").drawImage(t,a-t.width/2,r-t.width/2)},e.splitSheet=function(e,r,n){for(var i=new a.Dictionary,o=0;o<e.width/r;o++)for(var s=0;s<e.height/n;s++)i.put([o,s],t(e,o*r,s*n,r,n));return i},e.resize=function(e,t,a){var n=r.makeCanvas(t,a).getContext("2d");return n.mozImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,n.scale(t/e.width,a/e.height),n.drawImage(e,0,0),n.canvas},e.flipTextures=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a],i=r.makeCanvas(n.width,n.height).getContext("2d");i.translate(n.width,0),i.scale(-1,1),i.drawImage(n,0,0),t.push(i.canvas)}return t}});