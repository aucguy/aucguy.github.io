base.registerModule("xml",function(e){e.parseXml=function(e){if(window.DOMParser){var r=new DOMParser,t=r.parseFromString(e,"text/xml");return t}e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(e),n},e.copyAttributes=function(e,r){for(var t={},n=0;n<r.length;n++){var o=r[n],a=e.getAttribute(o);t[o]=a}return t},e.copyAttributesFromStyle=function(e,r){for(var t={},n=e.split(";"),o=0;o<n.length;o++){var a=n[o].split(":");if(2==a.length){var i=a[0],s=a[1];-1!=r.indexOf(i)&&(t[i]=s)}}return t},e.parseStyle=function(e,r){for(var t={},n=e.split(r),o=0;o<n.length;o++){var a=n[o].split(":");2==a.length&&(t[a[0]]=a[1])}return t},e.ensureType=function(e,r){if(r instanceof Array){for(var t=0;t<r.length;t++){var n=r[t];if(e.nodeName.toLowerCase()==n.toLowerCase())return e}throw new Error("element"+e+"is of incorrect DOM type")}if(e.nodeName.toLowerCase()!=r.toLowerCase())throw new Error("element"+e+"is of incorrect DOM type");return e},e.removeMetadata=function(e){var r=e.getElementsByTagName("metadata")[0];null!==r&&void 0!==r&&r.parentNode.removeChild(r)}});