"use strict";!function(e){var Q=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],S=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function l(e,t,a,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var i,g=document.getElementById(e).getContext("2d");try{try{i=g.getImageData(t,a,r,n)}catch(e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),i=g.getImageData(t,a,r,n)}catch(e){throw alert("Cannot access local image"),new Error("unable to access local image data: "+e)}}}catch(e){throw alert("Cannot access image"),new Error("unable to access image data: "+e)}!function(e){for(var t=e.data,a=e.width*e.height*4,r=0;r<a;r+=4){var n=t[r+3]/255;t[r]*=n,t[r+1]*=n,t[r+2]*=n}}(i);var c,l,d,f,s,u,h,m,x,b,v,w,y,p,I,B,E,C,D,N,R,P,G,M,U=i.data,k=o+o+1,A=r-1,H=n-1,W=o+1,j=W*(W+1)/2,q=new T,z=q;for(d=1;d<k;d++)if(z=z.next=new T,d==W)var F=z;z.next=q;var J=null,K=null;h=u=0;var L=Q[o],O=S[o];for(l=0;l<n;l++){for(B=E=C=D=m=x=b=v=0,w=W*(N=U[u]),y=W*(R=U[u+1]),p=W*(P=U[u+2]),I=W*(G=U[u+3]),m+=j*N,x+=j*R,b+=j*P,v+=j*G,z=q,d=0;d<W;d++)z.r=N,z.g=R,z.b=P,z.a=G,z=z.next;for(d=1;d<W;d++)f=u+((A<d?A:d)<<2),m+=(z.r=N=U[f])*(M=W-d),x+=(z.g=R=U[f+1])*M,b+=(z.b=P=U[f+2])*M,v+=(z.a=G=U[f+3])*M,B+=N,E+=R,C+=P,D+=G,z=z.next;for(J=q,K=F,c=0;c<r;c++)U[u]=m*L>>O,U[u+1]=x*L>>O,U[u+2]=b*L>>O,U[u+3]=v*L>>O,m-=w,x-=y,b-=p,v-=I,w-=J.r,y-=J.g,p-=J.b,I-=J.a,f=h+((f=c+o+1)<A?f:A)<<2,m+=B+=J.r=U[f],x+=E+=J.g=U[f+1],b+=C+=J.b=U[f+2],v+=D+=J.a=U[f+3],J=J.next,w+=N=K.r,y+=R=K.g,p+=P=K.b,I+=G=K.a,B-=N,E-=R,C-=P,D-=G,K=K.next,u+=4;h+=r}for(c=0;c<r;c++){for(E=C=D=B=x=b=v=m=0,w=W*(N=U[u=c<<2]),y=W*(R=U[u+1]),p=W*(P=U[u+2]),I=W*(G=U[u+3]),m+=j*N,x+=j*R,b+=j*P,v+=j*G,z=q,d=0;d<W;d++)z.r=N,z.g=R,z.b=P,z.a=G,z=z.next;for(s=r,d=1;d<=o;d++)u=s+c<<2,m+=(z.r=N=U[u])*(M=W-d),x+=(z.g=R=U[u+1])*M,b+=(z.b=P=U[u+2])*M,v+=(z.a=G=U[u+3])*M,B+=N,E+=R,C+=P,D+=G,z=z.next,d<H&&(s+=r);for(u=c,J=q,K=F,l=0;l<n;l++)U[f=u<<2]=m*L>>O,U[f+1]=x*L>>O,U[f+2]=b*L>>O,U[f+3]=v*L>>O,m-=w,x-=y,b-=p,v-=I,w-=J.r,y-=J.g,p-=J.b,I-=J.a,f=c+((f=l+W)<H?f:H)*r<<2,m+=B+=J.r=U[f],x+=E+=J.g=U[f+1],b+=C+=J.b=U[f+2],v+=D+=J.a=U[f+3],J=J.next,w+=N=K.r,y+=R=K.g,p+=P=K.b,I+=G=K.a,B-=N,E-=R,C-=P,D-=G,K=K.next,u+=r}!function(e){for(var t=e.data,a=e.width*e.height*4,r=0;r<a;r+=4){var n=t[r+3];0!=n&&(n=255/n,t[r]*=n,t[r+1]*=n,t[r+2]*=n)}}(i),g.putImageData(i,t,a)}}function d(e,t,a,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var i,g=document.getElementById(e).getContext("2d");try{try{i=g.getImageData(t,a,r,n)}catch(e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),i=g.getImageData(t,a,r,n)}catch(e){throw alert("Cannot access local image"),new Error("unable to access local image data: "+e)}}}catch(e){throw alert("Cannot access image"),new Error("unable to access image data: "+e)}var c,l,d,f,s,u,h,m,x,b,v,w,y,p,I,B,E,C,D,N,R=i.data,P=o+o+1,G=r-1,M=n-1,U=o+1,k=U*(U+1)/2,A=new T,H=A;for(d=1;d<P;d++)if(H=H.next=new T,d==U)var W=H;H.next=A;var j=null,q=null;h=u=0;var z=Q[o],F=S[o];for(l=0;l<n;l++){for(p=I=B=m=x=b=0,v=U*(E=R[u]),w=U*(C=R[u+1]),y=U*(D=R[u+2]),m+=k*E,x+=k*C,b+=k*D,H=A,d=0;d<U;d++)H.r=E,H.g=C,H.b=D,H=H.next;for(d=1;d<U;d++)f=u+((G<d?G:d)<<2),m+=(H.r=E=R[f])*(N=U-d),x+=(H.g=C=R[f+1])*N,b+=(H.b=D=R[f+2])*N,p+=E,I+=C,B+=D,H=H.next;for(j=A,q=W,c=0;c<r;c++)R[u]=m*z>>F,R[u+1]=x*z>>F,R[u+2]=b*z>>F,m-=v,x-=w,b-=y,v-=j.r,w-=j.g,y-=j.b,f=h+((f=c+o+1)<G?f:G)<<2,m+=p+=j.r=R[f],x+=I+=j.g=R[f+1],b+=B+=j.b=R[f+2],j=j.next,v+=E=q.r,w+=C=q.g,y+=D=q.b,p-=E,I-=C,B-=D,q=q.next,u+=4;h+=r}for(c=0;c<r;c++){for(I=B=p=x=b=m=0,v=U*(E=R[u=c<<2]),w=U*(C=R[u+1]),y=U*(D=R[u+2]),m+=k*E,x+=k*C,b+=k*D,H=A,d=0;d<U;d++)H.r=E,H.g=C,H.b=D,H=H.next;for(s=r,d=1;d<=o;d++)u=s+c<<2,m+=(H.r=E=R[u])*(N=U-d),x+=(H.g=C=R[u+1])*N,b+=(H.b=D=R[u+2])*N,p+=E,I+=C,B+=D,H=H.next,d<M&&(s+=r);for(u=c,j=A,q=W,l=0;l<n;l++)R[f=u<<2]=m*z>>F,R[f+1]=x*z>>F,R[f+2]=b*z>>F,m-=v,x-=w,b-=y,v-=j.r,w-=j.g,y-=j.b,f=c+((f=l+U)<M?f:M)*r<<2,m+=p+=j.r=R[f],x+=I+=j.g=R[f+1],b+=B+=j.b=R[f+2],j=j.next,v+=E=q.r,w+=C=q.g,y+=D=q.b,p-=E,I-=C,B-=D,q=q.next,u+=r}g.putImageData(i,t,a)}}function T(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var t={image:function(e,t,a,r){var n=document.getElementById(e),o=n.naturalWidth,i=n.naturalHeight,g=document.getElementById(t);g.style.width=o+"px",g.style.height=i+"px",g.width=o,g.height=i;var c=g.getContext("2d");c.clearRect(0,0,o,i),c.drawImage(n,0,0),isNaN(a)||a<1||(r?l:d)(t,0,0,o,i,a)},canvasRGBA:l,canvasRGB:d};"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports&&(module.exports=t),e.stackBlur=t}("undefined"!=typeof window?window:void 0);