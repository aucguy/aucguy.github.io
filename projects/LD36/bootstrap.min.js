var base=base||{};!function(){var a,b=!1;base.indexFunc=function(c){var d=[["image/fireOverlay","assets/image/fireOverlay.png","image"],["image/terrain","assets/image/terrain.png","image"],["image/burn","assets/image/burn.png","spritesheet",{frameWidth:16,frameHeight:16,pixelated:!0}],["image/log","assets/image/log.png","image"],["image/match","assets/image/match.png","image"],["image/hotdog","assets/image/hotdog.png","image"],["image/terrain","assets/image/terrain.png","image"],["tilemap/log","assets/tilemap/log.json","json"],["tilemap/match","assets/tilemap/match.json","json"],["tilemap/hotdog","assets/tilemap/hotdog.json","json"],["tilemap/terrain","assets/tilemap/terrain.json","json"],["gui/play","assets/gui/play.svg","text"],["data/fire","assets/data/fire.json","text"]];base.loadAssets(d.concat([["scripts/app","app.min.js","script"]])),a=new Image,a.onload=base.external(function(){b=!0}),a.src="assets/image/logo.svg"},base.renderLoadingScreen=function(c,d,e){var f=document.getElementById(c);if(null!==f){var g=f.getContext("2d");if(null!==g){var h=g.canvas.width,i=g.canvas.height;g.fillStyle="#FFFFFF",g.fillRect(0,0,h,i),b&&g.drawImage(a,(h-a.width)/2,(i-a.height)/2),g.fillStyle="#000000",g.beginPath(),g.rect(20,i-40,h-40,20),g.stroke(),g.beginPath(),g.rect(20,i-40,e/(e+d)*(h-40),20),g.fill()}}}}();
/*
 * Base.js by aucguy. Under MIT License.
 * built on  2017-03-31
 */

var base=function(a){function b(a){F=a,A(errorCallbacks,a),console.error(a.stack);var b=document.getElementById("error div"),c=document.getElementById("error text"),d=document.getElementById("display");c&&(c.innerHTML=a.stack),b&&(b.style.display="block"),d&&(d.style.display="none")}function c(a,c,d){if(!F)try{a.apply(c,d)}catch(e){b(e)}}function d(a){return function(){c(a,this,arguments)}}function e(a,b){return function(){var c=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);c[0]=base.external(c[0]);var d=a.apply(null,c);return b.push(d),d}}function f(a,b){return function(c){a(c),b.splice(b.indexOf(c),1)}}function g(a,b,c,e){var f=d(c);a.addEventListener(b,f,e),C.push({element:a,event:b,ext:f,callback:c,capture:e})}function h(a,b,c){for(var d=0;d<C.length;d++){var e=C[d];if(e.element==a&&e.event==b&&e.callback==c){e.element.removeEventListener(b,e.ext),C.splice(d,1);break}}}function i(a){for(var b=a,c={};a;){for(var d=Object.getOwnPropertyNames(a),e=0;e<d.length;e++){var f,g=d[e];if(g.startsWith(Q)){var h=g.slice(Q.length);f=a[h],f||(h=h[0].toLowerCase()+h.slice(1),f=a[h],f||(f=a[g]))}else f=a[g];"function"==typeof f?c[g]=f.bind(b):c[g]=f}a=Object.getPrototypeOf(a)}return c}function j(){var b=i(a);return b.setInterval=G,b.clearInterval=H,b.requestAnimationFrame=M,b.cancelAnimationFrame=N,b.setTimeout=O,b.clearTimeout=P,b}function k(a,b){var c={name:a,scope:null,initFunc:b};R[a]=c,A(S,c)}function l(a){var b=R[a];if(!b)throw new Error("module '"+a+"' is not defined");return b.scope||(b.scope=b.initFunc()),b.scope}function m(a){return T[a].data}function n(a,b,c,d,e,f){return{type:c,id:a,url:b,data:d,extra:e?e:{},xhr:f?f:null}}function o(a,b,c,d){a in T||(s(),u(v(U,b),"audio"==c,function(e){try{var f=["json","tilemap"].indexOf(c)!=-1?JSON.parse(e.response):e.response;T[a]=n(a,b,c,f,d,e),t()}catch(g){throw t(),g}},function(b){throw t(),new Error("failed to retrieve asset "+a)}))}function p(a,b,c,d){if(!(a in T)){s();var e=document.createElement(X[c]||c);"script"==c?(document.head.appendChild(e),e.onload=t):e.onload=base.external(function(){T[a]=n(a,b,c,e,d),t()}),e.onerror=base.external(function(){throw new Error("failed to load asset '"+a+"' at '"+b+"'")}),e.src=v(U,b)}}function q(a,b,c,d){"text"==X[c]||"audio"==c&&Y?o(a,b,c,d):p(a,b,c,d)}function r(a){for(var b=0;b<a.length;b++){var c=a[b];q(c[0],c[1],c[2],c[3])}}function s(){V=V<0?1:V+1}function t(){V--,W++}function u(a,b,c,e){"undefined"==typeof e&&(e=function(b){console.warn("asset '"+a+"' failed to load with a status of "+b.status)});var f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.responseType=b?"arraybuffer":"text",f.onreadystatechange=d(function(){4==f.readyState&&(200==f.status||0===f.status?c(f):e(f))}),f.open("GET",a,!0),f.send()}function v(){for(var a=[],b=0,c=arguments.length;b<c;b++)a=a.concat(arguments[b].split("/"));var d=[];for(b=0,c=a.length;b<c;b++){var e=a[b];e&&"."!==e&&(".."===e?d.pop():d.push(e))}return(a[0].startsWith("/")||a[0].startsWith("\\"))&&d.unshift(""),d.join("/")||(d.length?"/":".")}function w(){ca(_,V,W),aa=G(x,100),z($.INDEX_NOT_LOADED)}function x(){y(),ca(_,V,W),0===V&&(z($.APP_INITING),mainModule=l("main"),mainModule.init(),z($.APP_RUNNING))}function y(){ba==$.INDEX_NOT_LOADED&&null!==Z&&(Z(),z($.ASSETS_LOADING))}function z(a){a!=ba&&(ba=a,A(stateChangeCallbacks,a))}function A(a,b){for(var c=0;c<a.length;c++)a[c](b)}errorCallbacks=[];for(var B=[],C=[],D=[],E=[],F=null,G=e(setInterval,B),H=f(clearInterval,B),I=["ms","moz","webkit","o"],J=a.requestAnimationFrame,K=a.cancelAnimationFrame,L=0;L<I.length&&!J;L++)J=a[I[L]+"RequestAnimationFrame"],K=a[I[L]+"CancelAnimationFrame"];var M=e(J,D),N=f(K,D),O=e(setTimeout,E),P=f(clearTimeout,E),Q="webkit";errorCallbacks.push(function(a){var b;for(b=0;b<B.length;b++)H(B[b]);for(b=0;b<C.length;b++){var c=C[b];h(c.element,c.event,c.callback)}for(b=0;b<D.length;b++)N(D[b]);for(b=0;b<E.lenght;b++)clearTimeout(E[b])});var R={},S=[],T={},U="",V=-1,W=0,X={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},Y=!(!a.AudioContext&&!a.webkitAudioContext),Z=(a.base?a.base.indexFunc:null)||function(){},$={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},_="display",aa=null,ba=$.BASE_NOT_RUN;stateChangeCallbacks=[];var ca=(a.base?a.base.renderLoadingScreen:null)||function(){};return stateChangeCallbacks.push(function(a){a==$.APP_INITING&&(H(aa),ca())}),stateChangeCallbacks.push(y),g(document,"DOMContentLoaded",w,!1),{onError:b,runSafely:c,external:d,setInterval:G,clearInterval:H,addEventListener:g,removeEventListener:h,requestAnimationFrame:J,cancelAnimationFrame:N,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:j,getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return S},registerModule:k,importModule:l,getBasePath:function(){return U},setBasePath:function(a){U=a},hasWebAudio:function(){return Y},getAsset:m,getAssets:function(){return T},loadText:o,loadTag:p,loadAsset:q,loadAssets:r,decrLoading:t,renderLoadingScreen:ca,getStates:function(){return $},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return ba},setLoadingState:function(a){z(a)}}}(this);
//# sourceMappingURL=base.min.js.map