var base=base||{};!function(){var s,l=!1;base.indexFunc=function(e){base.loadAssets([["image/fireOverlay","assets/image/fireOverlay.png","image"],["image/terrain","assets/image/terrain.png","image"],["image/burn","assets/image/burn.png","spritesheet",{frameWidth:16,frameHeight:16,pixelated:!0}],["image/log","assets/image/log.png","image"],["image/match","assets/image/match.png","image"],["image/hotdog","assets/image/hotdog.png","image"],["image/terrain","assets/image/terrain.png","image"],["tilemap/log","assets/tilemap/log.json","json"],["tilemap/match","assets/tilemap/match.json","json"],["tilemap/hotdog","assets/tilemap/hotdog.json","json"],["tilemap/terrain","assets/tilemap/terrain.json","json"],["gui/play","assets/gui/play.svg","text"],["data/fire","assets/data/fire.json","text"]].concat([["scripts/app","app.min.js","script"]])),(s=new Image).onload=base.external(function(){l=!0}),s.src="assets/image/logo.svg"},base.renderLoadingScreen=function(e,t,n){var a=document.getElementById(e);if(null!==a){var r=a.getContext("2d");if(null!==r){var i=r.canvas.width,o=r.canvas.height;r.fillStyle="#FFFFFF",r.fillRect(0,0,i,o),l&&r.drawImage(s,(i-s.width)/2,(o-s.height)/2),r.fillStyle="#000000",r.beginPath(),r.rect(20,o-40,i-40,20),r.stroke(),r.beginPath(),r.rect(20,o-40,n/(n+t)*(i-40),20),r.fill()}}}}();base=function(t){function a(e){A(errorCallbacks,T=e),console.error(e.stack);var t=document.getElementById("error div"),n=document.getElementById("error text"),a=document.getElementById("display");n&&(n.innerHTML=e.stack),t&&(t.style.display="block"),a&&(a.style.display="none")}function n(e,t,n){if(!T)try{e.apply(t,n)}catch(e){a(e)}}function o(e){return function(){n(e,this,arguments)}}function e(n,a){return function(){var e=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);e[0]=base.external(e[0]);var t=n.apply(null,e);return a.push(t),t}}function r(t,n){return function(e){t(e),n.splice(n.indexOf(e),1)}}function i(e,t,n,a){var r=o(n);e.addEventListener(t,r,a),I.push({element:e,event:t,ext:r,callback:n,capture:a})}function s(e,t,n){for(var a=0;a<I.length;a++){var r=I[a];if(r.element==e&&r.event==t&&r.callback==n){r.element.removeEventListener(t,r.ext),I.splice(a,1);break}}}function l(e){var t=D[e];if(!t)throw new Error("module '"+e+"' is not defined");return t.scope||(t.scope=t.initFunc()),t.scope}function c(e,t,n,a,r,i){return{type:n,id:e,url:t,data:a,extra:r||{},xhr:i||null}}function u(n,a,r,i){n in B||(m(),function(t,e,n,a){void 0===a&&(a=function(e){console.warn("asset '"+t+"' failed to load with a status of "+e.status)});var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.responseType=e?"arraybuffer":"text",r.onreadystatechange=o(function(){4==r.readyState&&(200==r.status||0===r.status?n(r):a(r))}),r.open("GET",t,!0),r.send()}(p(G,a),"audio"==r,function(e){try{var t=-1!=["json","tilemap"].indexOf(r)?JSON.parse(e.response):e.response;B[n]=c(n,a,r,t,i,e),d()}catch(e){throw d(),e}},function(e){throw d(),new Error("failed to retrieve asset "+n)}))}function f(e,t,n,a){if(!(e in B)){m();var r=document.createElement(q[n]||n);"script"==n?(document.head.appendChild(r),r.onload=d):r.onload=base.external(function(){B[e]=c(e,t,n,r,a),d()}),r.onerror=base.external(function(){throw new Error("failed to load asset '"+e+"' at '"+t+"'")}),r.src=p(G,t)}}function g(e,t,n,a){"text"==q[n]||"audio"==n&&W?u(e,t,n,a):f(e,t,n,a)}function m(){R=R<0?1:R+1}function d(){R--,X++}function p(){for(var e=[],t=0,n=arguments.length;t<n;t++)e=e.concat(arguments[t].split("/"));var a=[];for(t=0,n=e.length;t<n;t++){var r=e[t];r&&"."!==r&&(".."===r?a.pop():a.push(r))}return(e[0].startsWith("/")||e[0].startsWith("\\"))&&a.unshift(""),a.join("/")||(a.length?"/":".")}function h(){v(),Q(z,R,X),0===R&&(b(U.APP_INITING),mainModule=l("main"),mainModule.init(),b(U.APP_RUNNING))}function v(){K==U.INDEX_NOT_LOADED&&null!==H&&(H(),b(U.ASSETS_LOADING))}function b(e){e!=K&&(K=e,A(stateChangeCallbacks,e))}function A(e,t){for(var n=0;n<e.length;n++)e[n](t)}errorCallbacks=[];for(var y=[],I=[],x=[],E=[],T=null,C=e(setInterval,y),N=r(clearInterval,y),k=["ms","moz","webkit","o"],w=t.requestAnimationFrame,L=t.cancelAnimationFrame,O=0;O<k.length&&!w;O++)w=t[k[O]+"RequestAnimationFrame"],L=t[k[O]+"CancelAnimationFrame"];var S=e(w,x),F=r(L,x),P=e(setTimeout,E),_=r(clearTimeout,E),j="webkit";errorCallbacks.push(function(e){var t;for(t=0;t<y.length;t++)N(y[t]);for(t=0;t<I.length;t++){var n=I[t];s(n.element,n.event,n.callback)}for(t=0;t<x.length;t++)F(x[t]);for(t=0;t<E.lenght;t++)clearTimeout(E[t])});var D={},M=[],B={},G="",R=-1,X=0,q={image:"img",spritesheet:"img",text:"text",json:"text",tilemap:"text"},W=!(!t.AudioContext&&!t.webkitAudioContext),H=(t.base?t.base.indexFunc:null)||function(){},U={BASE_NOT_LOADED:0,INDEX_NOT_LOADED:1,ASSETS_LOADING:2,APP_INITING:3,APP_RUNNING:4},z="display",J=null,K=U.BASE_NOT_RUN;stateChangeCallbacks=[];var Q=(t.base?t.base.renderLoadingScreen:null)||function(){};return stateChangeCallbacks.push(function(e){e==U.APP_INITING&&(N(J),Q())}),stateChangeCallbacks.push(v),i(document,"DOMContentLoaded",function(){Q(z,R,X),J=C(h,100),b(U.INDEX_NOT_LOADED)},!1),{onError:a,runSafely:n,external:o,setInterval:C,clearInterval:N,addEventListener:i,removeEventListener:s,requestAnimationFrame:w,cancelAnimationFrame:F,setTimeout:setTimeout,clearTimeout:clearTimeout,customWindow:function(){var e=function(e){for(var t=e,n={};e;){for(var a=Object.getOwnPropertyNames(e),r=0;r<a.length;r++){var i,o=a[r];if(o.startsWith(j)){var s=o.slice(j.length);(i=e[s])||(i=e[s=s[0].toLowerCase()+s.slice(1)])||(i=e[o])}else i=e[o];n[o]="function"==typeof i?i.bind(t):i}e=Object.getPrototypeOf(e)}return n}(t);return e.setInterval=C,e.clearInterval=N,e.requestAnimationFrame=S,e.cancelAnimationFrame=F,e.setTimeout=P,e.clearTimeout=_,e},getErrorCallbacks:function(){return errorCallbacks},getRegisterCallbacks:function(){return M},registerModule:function(e,t){var n={name:e,scope:null,initFunc:t};D[e]=n,A(M,n)},importModule:l,getBasePath:function(){return G},setBasePath:function(e){G=e},hasWebAudio:function(){return W},getAsset:function(e){return B[e].data},getAssets:function(){return B},loadText:u,loadTag:f,loadAsset:g,loadAssets:function(e){for(var t=0;t<e.length;t++){var n=e[t];g(n[0],n[1],n[2],n[3])}},decrLoading:d,renderLoadingScreen:Q,getStates:function(){return U},getStateChangeCallbacks:function(){return stateChangeCallbacks},getLoadingState:function(){return K},setLoadingState:function(e){b(e)}}}(this);